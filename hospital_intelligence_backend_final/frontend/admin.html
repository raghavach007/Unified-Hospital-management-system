<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>System Admin | Hospital OS</title>
    <link rel="stylesheet" href="css/main.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <style>
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr); /* Force 4 columns on desktop */
            gap: 1.5rem;
        }

        .charts-layout {
            display: grid;
            grid-template-columns: 2fr 1fr; /* 2/3rds for Main chart, 1/3rd for Pie */
            gap: 1.5rem;
            min-height: 400px;
        }

        /* Form Optimization */
        .create-user-form {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr 1fr auto; /* Inputs share space, button takes auto */
            gap: 1rem;
            align-items: end;
        }

        /* Responsive Breakpoints */
        @media (max-width: 1024px) {
            .stats-grid { grid-template-columns: 1fr 1fr; } /* 2x2 on tablets */
            .charts-layout { grid-template-columns: 1fr; } /* Stack charts */
            .create-user-form { grid-template-columns: 1fr 1fr; } /* Wrap form */
            .create-user-form button { grid-column: span 2; }
        }

        @media (max-width: 768px) {
            .stats-grid { grid-template-columns: 1fr; } /* Stack stats */
        }
    </style>
</head>
<body>
    <div class="app-shell">
        <header>
            <div class="brand"><i class="fas fa-network-wired"></i> SYSTEM ADMIN</div>
            <button onclick="localStorage.clear(); window.location.href='login.html'" class="btn-outline">Logout</button>
        </header>

        <main style="display: flex; flex-direction: column; gap: 2rem; padding: 2rem;">
            
            <div class="stats-grid">
                <div class="glass-panel" style="padding: 1.5rem; position: relative; overflow: hidden;">
                    <div style="position: absolute; right: -10px; top: -10px; font-size: 5rem; opacity: 0.05;">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="text-xs">TOTAL PATIENTS</div>
                    <div id="stat-patients" style="font-size: 2.5rem; font-weight: 700; color: var(--text-main);">--</div>
                </div>
                <div class="glass-panel" style="padding: 1.5rem;">
                    <div class="text-xs">ROOM OCCUPANCY</div>
                    <div id="stat-occupancy" style="font-size: 2.5rem; font-weight: 700; color: var(--warning);">--%</div>
                </div>
                <div class="glass-panel" style="padding: 1.5rem;">
                    <div class="text-xs">DOCTORS ACTIVE</div>
                    <div id="stat-doctors" style="font-size: 2.5rem; font-weight: 700; color: var(--success);">--</div>
                </div>
                <div class="glass-panel" style="padding: 1.5rem;">
                    <div class="text-xs">CRITICAL ALERTS</div>
                    <div id="stat-critical" style="font-size: 2.5rem; font-weight: 700; color: var(--critical);">--</div>
                </div>
            </div>

            <div class="glass-panel" style="padding: 2rem; border-left: 4px solid var(--primary);">
                <div style="margin-bottom: 1.5rem; display: flex; justify-content: space-between; align-items: center;">
                    <h2 style="margin: 0;"><i class="fas fa-user-shield"></i> User Management</h2>
                    <span style="font-size: 0.8rem; opacity: 0.6;">Add new staff members to the Hospital OS</span>
                </div>
                
                <form id="createAccountForm" class="create-user-form">
                    <div>
                        <label class="text-xs">USERNAME</label>
                        <div style="position: relative;">
                            <i class="fas fa-user" style="position: absolute; left: 12px; top: 12px; opacity: 0.5;"></i>
                            <input type="text" id="newUsername" placeholder="e.g. dr_house" required style="padding-left: 35px;">
                        </div>
                    </div>
                    
                    <div>
                        <label class="text-xs">PASSWORD</label>
                        <div style="position: relative;">
                            <i class="fas fa-lock" style="position: absolute; left: 12px; top: 12px; opacity: 0.5;"></i>
                            <input type="password" id="newPassword" placeholder="******" required style="padding-left: 35px;">
                        </div>
                    </div>

                    <div>
                        <label class="text-xs">ROLE</label>
                        <select id="newRole">
                            <option value="DOCTOR">Doctor</option>
                            <option value="NURSE">Nurse</option>
                            <option value="ADMISSION">Admission Desk</option>
                        </select>
                    </div>

                    <div>
                        <label class="text-xs">DEPARTMENT</label>
                        <select id="newDepartment">
                            <option value="ADMINISTRATION">Administration</option>
                            <option value="GENERAL">General</option>
                            <option value="WARD_A">Ward A</option>
                            <option value="FRONT_DESK">Front Desk</option>
                        </select>
                    </div>

                    <button type="submit" class="btn" style="height: 45px;">
                        <i class="fas fa-plus-circle"></i> ADD USER
                    </button>
                </form>
            </div>

            <div class="charts-layout">
                <div class="glass-panel" style="padding: 1.5rem; display: flex; flex-direction: column;">
                    <h3 style="margin-top: 0; margin-bottom: 1rem; font-size: 1rem; opacity: 0.8;">Admission Trends (7 Days)</h3>
                    <div style="flex: 1; position: relative; min-height: 250px;">
                        <canvas id="admissionChart"></canvas>
                    </div>
                </div>
                
                <div class="glass-panel" style="padding: 1.5rem; display: flex; flex-direction: column;">
                    <h3 style="margin-top: 0; margin-bottom: 1rem; font-size: 1rem; opacity: 0.8;">Room Distribution</h3>
                    <div style="flex: 1; position: relative; min-height: 250px; display: flex; justify-content: center;">
                        <canvas id="roomChart"></canvas>
                    </div>
                </div>
            </div>

        </main>
    </div>

    <script type="module" src="js/admin.js"></script>
</body>
</html>